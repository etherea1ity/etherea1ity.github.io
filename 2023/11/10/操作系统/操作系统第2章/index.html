<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>操作系统第2章 | Jerryの魔法小屋</title><meta name="author" content="Jerry Jiang"><meta name="copyright" content="Jerry Jiang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="操作系统第2章 进程的描述与控制重要内容知识点前驱图和程序执行前驱图初始节点、终止节点、权重、无循环 程序顺序执行顺序性、封闭性（独占资源）、可再现性 程序并发执行 间断性（停停走走）、失去封闭性、不可再现性 进程的描述进程的概念进程的定义：进程是程序的执行过程，是系统进行资源分配的调度的一个独立单位。 进程的特征：动态性、并发性、独立性、异步性（每个进程无关）。 进程和程序：程序没有并发性 进行">
<meta property="og:type" content="article">
<meta property="og:title" content="操作系统第2章">
<meta property="og:url" content="http://example.com/2023/11/10/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%AC2%E7%AB%A0/index.html">
<meta property="og:site_name" content="Jerryの魔法小屋">
<meta property="og:description" content="操作系统第2章 进程的描述与控制重要内容知识点前驱图和程序执行前驱图初始节点、终止节点、权重、无循环 程序顺序执行顺序性、封闭性（独占资源）、可再现性 程序并发执行 间断性（停停走走）、失去封闭性、不可再现性 进程的描述进程的概念进程的定义：进程是程序的执行过程，是系统进行资源分配的调度的一个独立单位。 进程的特征：动态性、并发性、独立性、异步性（每个进程无关）。 进程和程序：程序没有并发性 进行">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://imageurlbed.oss-cn-shenzhen.aliyuncs.com/img/mountains-7750722_1920.jpg">
<meta property="article:published_time" content="2023-11-10T06:07:21.000Z">
<meta property="article:modified_time" content="2023-12-23T06:27:49.296Z">
<meta property="article:author" content="Jerry Jiang">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://imageurlbed.oss-cn-shenzhen.aliyuncs.com/img/mountains-7750722_1920.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2023/11/10/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%AC2%E7%AB%A0/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '操作系统第2章',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-12-23 14:27:49'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><script src="/live2d-widget/autoload.js"></script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://imageurlbed.oss-cn-shenzhen.aliyuncs.com/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">25</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://imageurlbed.oss-cn-shenzhen.aliyuncs.com/img/mountains-7750722_1920.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="Jerryの魔法小屋"><span class="site-name">Jerryの魔法小屋</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">操作系统第2章</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-11-10T06:07:21.000Z" title="发表于 2023-11-10 14:07:21">2023-11-10</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-12-23T06:27:49.296Z" title="更新于 2023-12-23 14:27:49">2023-12-23</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/">计算机科学</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="操作系统第2章"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="操作系统第2章-进程的描述与控制"><a href="#操作系统第2章-进程的描述与控制" class="headerlink" title="操作系统第2章 进程的描述与控制"></a>操作系统第2章 进程的描述与控制</h1><h2 id="重要内容"><a href="#重要内容" class="headerlink" title="重要内容"></a>重要内容</h2><h2 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h2><h3 id="前驱图和程序执行"><a href="#前驱图和程序执行" class="headerlink" title="前驱图和程序执行"></a>前驱图和程序执行</h3><h4 id="前驱图"><a href="#前驱图" class="headerlink" title="前驱图"></a>前驱图</h4><p>初始节点、终止节点、权重、无循环</p>
<h4 id="程序顺序执行"><a href="#程序顺序执行" class="headerlink" title="程序顺序执行"></a>程序顺序执行</h4><p>顺序性、封闭性（独占资源）、可再现性</p>
<h4 id="程序并发执行"><a href="#程序并发执行" class="headerlink" title="程序并发执行"></a>程序并发执行</h4><p><img src="https://imageurlbed.oss-cn-shenzhen.aliyuncs.com/img/bingfa.png" alt=""></p>
<p>间断性（停停走走）、失去封闭性、不可再现性</p>
<h3 id="进程的描述"><a href="#进程的描述" class="headerlink" title="进程的描述"></a>进程的描述</h3><h4 id="进程的概念"><a href="#进程的概念" class="headerlink" title="进程的概念"></a>进程的概念</h4><p>进程的定义：进程是程序的执行过程，是系统进行资源分配的调度的一个独立单位。</p>
<p>进程的特征：<strong>动态性、并发性、独立性、异步性（每个进程无关）</strong>。</p>
<p>进程和程序：程序没有并发性</p>
<h4 id="进行的基本状态与转化"><a href="#进行的基本状态与转化" class="headerlink" title="进行的基本状态与转化"></a>进行的基本状态与转化</h4><p>进程的状态：<strong>就绪（ready）状态、执行（running）状态、阻塞（block）状态</strong>。</p>
<p><img src="https://imageurlbed.oss-cn-shenzhen.aliyuncs.com/img/jinchengzhuangtai.png" alt=""></p>
<p>创建状态和终止状态</p>
<ol>
<li>创建状态：申请一个空白PCB、分配资源、PCB初始化工作、插入就绪队列</li>
<li>终止状态：相应善后工作、资源退回、从当前队列中移出PCB、放入终止队列、等待其他进程搜集信息、PCB清零、归还PCB</li>
</ol>
<h4 id="挂起操作和进程状态的转换"><a href="#挂起操作和进程状态的转换" class="headerlink" title="挂起操作和进程状态的转换"></a>挂起操作和进程状态的转换</h4><p>与挂起操作对应的是激活操作。</p>
<p>挂起原因：</p>
<ol>
<li>终端用户的需要</li>
<li>父进程请求</li>
<li>负荷调节的需要</li>
<li>操作系统的需要</li>
</ol>
<p>挂起操作三个基本状态间的转换：（挂起原语Suspend、激活原语Active）</p>
<ol>
<li>活动就绪（Readya）到静止就绪（Readys）</li>
<li>活动阻塞（Blockeda）到静止阻塞（Blockeds）</li>
<li>激活就是反过来</li>
</ol>
<p>引入挂起：NULL到创建，创建到活动、静止就绪，执行到终止</p>
<p><img src="https://imageurlbed.oss-cn-shenzhen.aliyuncs.com/img/guaqizhuangtaizhuanhuan.png" alt=""></p>
<h4 id="进程管理中的数据结构"><a href="#进程管理中的数据结构" class="headerlink" title="进程管理中的数据结构"></a>进程管理中的数据结构</h4><p>OS管理的控制表有：<strong>内存表、设备表、文件表和PCB进程表</strong></p>
<h5 id="PCB表"><a href="#PCB表" class="headerlink" title="PCB表"></a>PCB表</h5><p>定义：<strong>是进程存在的唯一标志</strong></p>
<p>作用：</p>
<ol>
<li>作为独立运行基本单位的标志</li>
<li>实现间断性运行方式</li>
<li>提供进程管理所需要的信息</li>
<li>提供进程调度所需要的信息</li>
<li>实现与其他进程的同步与通信</li>
</ol>
<p>PCB中的信息</p>
<p><img src="https://imageurlbed.oss-cn-shenzhen.aliyuncs.com/img/PCBxinxi.png" alt=""></p>
<ol>
<li>处理机状态：通用寄存器、指令计数器、程序状态字、用户栈指针</li>
<li>进程调度信息：进程状态、进程优先级、其它信息、事件（阻塞原因）（对外）</li>
<li>进程控制信息：程序和数据的地址、同步和通信机制、资源清单、链接指针（对内）</li>
</ol>
<p>PCB组织方式：索引、链接、线性</p>
<h3 id="进程控制"><a href="#进程控制" class="headerlink" title="进程控制"></a>进程控制</h3><h4 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h4><p>什么是进程控制：进程创建、终止、进程状态切换</p>
<p>进程控制：操作系统<strong>内核</strong>中的<strong>原语</strong></p>
<p><img src="https://imageurlbed.oss-cn-shenzhen.aliyuncs.com/img/yonghuxitongtai.png" alt=""></p>
<p><img src="https://imageurlbed.oss-cn-shenzhen.aliyuncs.com/img/caozuoxitongneihe.png" alt=""></p>
<h4 id="进程的创建"><a href="#进程的创建" class="headerlink" title="进程的创建"></a>进程的创建</h4><p>进程图：一棵树，代表了父和子进程</p>
<p><img src="https://imageurlbed.oss-cn-shenzhen.aliyuncs.com/img/jinchengtu.png" alt=""></p>
<p>引起进程创建的事件（前三为内核创建、第四位用户进程创建）：</p>
<ol>
<li>用户登录（分时系统用户登录终端）</li>
<li>作业调度（多道批处理系统，把作业装入内存）</li>
<li>提供服务（处理请求，如需要打印）</li>
<li>应用请求（应用程序创建子进程）</li>
</ol>
<p>进程的创建：</p>
<ol>
<li>申请空的PCB</li>
<li>为新进程分配资源</li>
<li>初始化PCB4</li>
<li>插入就绪队列</li>
</ol>
<h4 id="进程的终止"><a href="#进程的终止" class="headerlink" title="进程的终止"></a>进程的终止</h4><p>引起进程终止的事件：</p>
<ol>
<li>正常结束：子进程可以向父进程请求撤销自己</li>
<li>异常结束</li>
<li>外界干预：父进程可以撤销子进程，或因为父撤销了子也撤销</li>
</ol>
<p>终止过程：</p>
<ol>
<li>根据终止进程标识符，从PCB集合中检索出该进程的PCB，并从该进程PCB中读出该进程状态。</li>
<li>检查是处于执行状态，若执行，停止执行并置调度标识为true</li>
<li>检查是否有子进程，若有，终止所有子进程</li>
<li>归还所占的资源给父进程或OS</li>
<li>把PCB从队列中移走</li>
</ol>
<h4 id="进程的阻塞与唤醒（block-wakeup）"><a href="#进程的阻塞与唤醒（block-wakeup）" class="headerlink" title="进程的阻塞与唤醒（block wakeup）"></a>进程的阻塞与唤醒（block wakeup）</h4><p>一般OS实现</p>
<p>引起阻塞的事件：</p>
<ol>
<li>请求系统服务（OS不能立即满足，如打印机正在用）</li>
<li>启动某种操作（如IO操作后才能执行）</li>
<li>数据尚未到达</li>
<li>无新工作</li>
</ol>
<p>进程的阻塞与唤醒</p>
<ol>
<li>立即停止执行</li>
<li>改变状态为阻塞</li>
<li>插入到阻塞队列</li>
<li>如果唤醒，从阻塞队列移出，修改PCB中的状态信息，插入就绪队列</li>
</ol>
<h4 id="进程的挂起与激活（suspend-active）"><a href="#进程的挂起与激活（suspend-active）" class="headerlink" title="进程的挂起与激活（suspend active）"></a>进程的挂起与激活（suspend active）</h4><p>用户也可以干预</p>
<p>进程挂起：</p>
<ol>
<li>改为相应的挂起状态（活动就绪改为静止就绪、活动阻塞改为静止阻塞）</li>
<li>把进程的PCB复制到指定的区域</li>
<li>转向调度程序重新调度</li>
</ol>
<p>进程激活</p>
<ol>
<li>将进程从外存调入内存</li>
<li>改为相应的活动状态</li>
<li>根据优先级确定是否需要重新调度（抢占调度）</li>
</ol>
<h3 id="进程同步"><a href="#进程同步" class="headerlink" title="进程同步"></a>进程同步</h3><p>转到第4章！</p>
<h3 id="进程通信"><a href="#进程通信" class="headerlink" title="进程通信"></a>进程通信</h3><p>进程通信指进程之间的信息交换。</p>
<p>低级通信：如进程同步，信号量机制</p>
<ol>
<li>效率低，一次只能传一个</li>
<li>通信对用户不透明</li>
</ol>
<p>高级通信：高效大量且方便（透明）的进程之间的信息交换。</p>
<h4 id="进程通信的类型"><a href="#进程通信的类型" class="headerlink" title="进程通信的类型"></a>进程通信的类型</h4><p><strong>共享存储器系统</strong></p>
<p>其中功能都由进程控制，而非os</p>
<p><img src="https://imageurlbed.oss-cn-shenzhen.aliyuncs.com/img/gongxiangcunchuqi.png" alt=""></p>
<p><strong>管道通信系统</strong></p>
<p><img src="https://imageurlbed.oss-cn-shenzhen.aliyuncs.com/img/pipe.png" alt=""></p>
<p><strong>消息传递系统</strong></p>
<p>直接传递利用OS提供的发送原语。如send(receiver, a)，receive(b)</p>
<p>间接通信经过信箱。</p>
<p><img src="https://imageurlbed.oss-cn-shenzhen.aliyuncs.com/img/xiaoxichuandi.png" alt=""></p>
<p><strong>客户机-服务器交换系统</strong></p>
<p>套接字基于网络型：采用非对称方式通信，发送者需要提供接收者的名称，双方的进程运行在不同主机的网络环境下。通信被分了一对套接字，发送进程发出连接请求会随机分配一个套接字，此时主机会为他分配一个端口并绑定。通信结束后，系统通过关闭接收进程的套接字来撤销连接。</p>
<p>远程过程调用：如果涉及的软件采用面向对象编程，那么也可以成为远程方法调用。</p>
<p>RPC引入存根的概念，一次调用分为客户存根和服务器存根，一般处于阻塞状态。</p>
<p><img src="https://imageurlbed.oss-cn-shenzhen.aliyuncs.com/img/kehujifuwuqi.png" alt=""></p>
<h4 id="消息传递通信的实现方式"><a href="#消息传递通信的实现方式" class="headerlink" title="消息传递通信的实现方式"></a>消息传递通信的实现方式</h4><p><strong>直接通信</strong></p>
<p>（1）直接通信原语</p>
<ol>
<li>对称寻址方式send（receiver，message），receive（sender，message），一旦改变进程的名称，就可能需要检查所有其他进程有关该进程的引用，不利于模块化。</li>
<li>非对称，接收进程可能需要与多个发送进程进行通信，因此无法事先指定发送进程。<ol>
<li>send（P，message）</li>
<li>receive（id，message）：接收任何进程的西澳西，id可以设置为通信的发送方式或其他。</li>
</ol>
</li>
</ol>
<p>（2）消息的格式</p>
<p>分为定长消息格式和变长消息格式。</p>
<p>（3）进程的同步方式</p>
<ol>
<li>发送阻塞，接收阻塞：紧密同步，发送接收间无缓冲</li>
<li>发送不阻塞，接受阻塞：最广泛，发送不阻塞可以尽快发送消息给多个目标，接收平时阻塞，收消息才唤醒。</li>
<li>发送接受均不阻塞：也常见，平时都忙，发生某事件才会阻塞。</li>
</ol>
<p>（4）通信链路</p>
<p>建立发送进程和接收进程之间的链路。</p>
<p>方式：</p>
<ol>
<li>显示建立连接（原语），请求系统建立一条链路，用完后拆除。（计算机网络）</li>
<li>无需明确建立链路，只需用系统提供的发送命令（原语）即可。</li>
</ol>
<p>分类：</p>
<ol>
<li>单向通信链路</li>
<li>双向通信链路</li>
</ol>
<p><strong>信箱通信</strong></p>
<p><img src="https://imageurlbed.oss-cn-shenzhen.aliyuncs.com/img/xinxiang.png" alt=""></p>
<p>私用信箱：用户进程创建，可以用单向通信链路</p>
<p>公用信箱：OS创建</p>
<p>共享信箱：某进程创建，指出共享进程（用户）名字</p>
<h3 id="线程（Thread）"><a href="#线程（Thread）" class="headerlink" title="线程（Thread）"></a>线程（Thread）</h3><h4 id="线程的引入"><a href="#线程的引入" class="headerlink" title="线程的引入"></a>线程的引入</h4><p>引入：</p>
<ol>
<li>引入进程：使多个程序能并发执行</li>
<li>引入线程：减少程序并发执行时付出的时空开销</li>
</ol>
<p>进程的两个基本属性：</p>
<ol>
<li>进程是一个可拥有资源的独立单位。</li>
<li>进程是一个可独立调度和分配的单位。</li>
</ol>
<p>进程的开销：创建、撤销、切换进程。</p>
<p>线程：将进程的两个基本属性分开：拥有资源的基本单位不频繁切换，调度和分配的基本单位不同时作为拥有资源的基本单位。</p>
<h4 id="线程与进程"><a href="#线程与进程" class="headerlink" title="线程与进程"></a>线程与进程</h4><p><strong>基本单位</strong>：调度的基本单位是<strong>线程</strong>，资源分配的基本单位是<strong>进程</strong>。线程拥有资源很少，仅能确保自己独立运行。</p>
<p>同一进程中线程切换不会引起进程切换，不同的会。</p>
<p><strong>并发性</strong>：支持多线程的OS中，同一进程中的不同线程也可以并发；不同进程的线程也可以并发。</p>
<p><strong>独立性</strong>：</p>
<ol>
<li>进程和进程之间是相互独立的；（除了为了进程通信设计的某些共享公共变量和空间外）</li>
<li>线程和线程之间并不独立：同一进程的所有线程都具有相同的地址空间，也就是说线程可以访问该地址空间的所有的地址。</li>
<li>所以安全性进程好，一个线程崩溃，会导致整个进程崩溃。</li>
</ol>
<p>线程系统开销小。</p>
<p><strong>支持多处理机系统</strong>：传统进程不管有多少处理机，都只能放在一个上面，引入线程后，可以把线程分配到多个处理及上，加速。</p>
<h4 id="线程状态和线程控制块"><a href="#线程状态和线程控制块" class="headerlink" title="线程状态和线程控制块"></a>线程状态和线程控制块</h4><p><strong>线程状态</strong>：执行状态，就绪状态，阻塞状态。</p>
<p><img src="https://imageurlbed.oss-cn-shenzhen.aliyuncs.com/img/xianchengkongzhikuai.png" alt=""></p>
<p><strong>多线程OS中进程属性</strong>：</p>
<ol>
<li>可拥有资源的基本单位</li>
<li>多个线程可并发执行</li>
<li>进程已不是可执行的实体</li>
</ol>
<h3 id="线程的实现"><a href="#线程的实现" class="headerlink" title="线程的实现"></a>线程的实现</h3><p><strong>内核支持线程KST（Kernel Supported Threads）</strong></p>
<p><img src="https://imageurlbed.oss-cn-shenzhen.aliyuncs.com/img/KST.png" alt=""></p>
<p>优点：</p>
<ol>
<li>多处理机系统中，内核可以调度同一进程多个线程并行。</li>
<li>如果进程中一个线程被阻塞，可以调用其他线程。</li>
<li>内核支持线程具有很小的数据结构的堆栈，开销小。</li>
<li>内核本身也可以用多线程技术，提高效率。</li>
</ol>
<p>缺点：</p>
<ol>
<li>对于用户的进程切换，模式切换的开销较大。</li>
<li>同一进程不同线程切换要从用户态转到内核态。</li>
</ol>
<p><strong>用户级线程ULT（user level thread）</strong></p>
<p>注意，ULT的调度仍然是<strong>进程</strong>为单位。而KST是<strong>线程</strong>为单位。</p>
<p>采用时间片轮转调度算法时，各个进程轮流执行一个时间片，如果进程A有1个ULT，而进程B有100个ULT，那么，进程A的线程的运行时间将是B的100倍。相应的，A的运行速度也快上100倍。</p>
<p>如果是KST，便会以线程为单位，那么B可以获得的CPU时间是A的100倍，同时也可以使100个系统调用并发执行。</p>
<p><img src="https://imageurlbed.oss-cn-shenzhen.aliyuncs.com/img/ult1.png" alt=""></p>
<p>缺点：</p>
<p><img src="https://imageurlbed.oss-cn-shenzhen.aliyuncs.com/img/ult2.png" alt=""></p>
<p><strong>LWP组合方式</strong></p>
<p>多对一：线程管理的开销小，但是每次只有一个线程可以访问内核，且如果在访问内核发生阻塞，则所有线程无法访问内核。多个线程无法同时在多个处理机上运行。</p>
<p>一对一：在一个线程阻塞时，可以调度另一个线程。但是被限制了线程数。</p>
<p>多对多：两个结合。</p>
<p><img src="https://imageurlbed.oss-cn-shenzhen.aliyuncs.com/img/LWP.png" alt=""></p>
<p>ps：线程的终止<strong>并不会立即释放资源</strong>，除非别的线程执行了分离函数，不然可以被其他线程调用<strong>重新唤醒</strong>。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://example.com">Jerry Jiang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2023/11/10/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%AC2%E7%AB%A0/">http://example.com/2023/11/10/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%AC2%E7%AB%A0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">Jerryの魔法小屋</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://imageurlbed.oss-cn-shenzhen.aliyuncs.com/img/mountains-7750722_1920.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/11/10/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%AC4%E7%AB%A0/" title="操作系统第4章"><img class="cover" src="https://imageurlbed.oss-cn-shenzhen.aliyuncs.com/img/mountains-7750722_1920.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">操作系统第4章</div></div></a></div><div class="next-post pull-right"><a href="/2023/11/10/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%AC3%E7%AB%A0/" title="操作系统第3章"><img class="cover" src="https://imageurlbed.oss-cn-shenzhen.aliyuncs.com/img/mountains-7750722_1920.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">操作系统第3章</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://imageurlbed.oss-cn-shenzhen.aliyuncs.com/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Jerry Jiang</div><div class="author-info__description">赞美太阳！</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">25</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/etherea1ity"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/etherea1ity" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:jsj31415926@outlook.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的小屋！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%AC2%E7%AB%A0-%E8%BF%9B%E7%A8%8B%E7%9A%84%E6%8F%8F%E8%BF%B0%E4%B8%8E%E6%8E%A7%E5%88%B6"><span class="toc-number">1.</span> <span class="toc-text">操作系统第2章 进程的描述与控制</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8D%E8%A6%81%E5%86%85%E5%AE%B9"><span class="toc-number">1.1.</span> <span class="toc-text">重要内容</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">1.2.</span> <span class="toc-text">知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E9%A9%B1%E5%9B%BE%E5%92%8C%E7%A8%8B%E5%BA%8F%E6%89%A7%E8%A1%8C"><span class="toc-number">1.2.1.</span> <span class="toc-text">前驱图和程序执行</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%8D%E9%A9%B1%E5%9B%BE"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">前驱图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E9%A1%BA%E5%BA%8F%E6%89%A7%E8%A1%8C"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">程序顺序执行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E5%B9%B6%E5%8F%91%E6%89%A7%E8%A1%8C"><span class="toc-number">1.2.1.3.</span> <span class="toc-text">程序并发执行</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E7%9A%84%E6%8F%8F%E8%BF%B0"><span class="toc-number">1.2.2.</span> <span class="toc-text">进程的描述</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">进程的概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9B%E8%A1%8C%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%8A%B6%E6%80%81%E4%B8%8E%E8%BD%AC%E5%8C%96"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">进行的基本状态与转化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%82%E8%B5%B7%E6%93%8D%E4%BD%9C%E5%92%8C%E8%BF%9B%E7%A8%8B%E7%8A%B6%E6%80%81%E7%9A%84%E8%BD%AC%E6%8D%A2"><span class="toc-number">1.2.2.3.</span> <span class="toc-text">挂起操作和进程状态的转换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">1.2.2.4.</span> <span class="toc-text">进程管理中的数据结构</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#PCB%E8%A1%A8"><span class="toc-number">1.2.2.4.1.</span> <span class="toc-text">PCB表</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="toc-number">1.2.3.</span> <span class="toc-text">进程控制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%88%9B%E5%BB%BA"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">进程的创建</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E7%9A%84%E7%BB%88%E6%AD%A2"><span class="toc-number">1.2.3.3.</span> <span class="toc-text">进程的终止</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E7%9A%84%E9%98%BB%E5%A1%9E%E4%B8%8E%E5%94%A4%E9%86%92%EF%BC%88block-wakeup%EF%BC%89"><span class="toc-number">1.2.3.4.</span> <span class="toc-text">进程的阻塞与唤醒（block wakeup）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E7%9A%84%E6%8C%82%E8%B5%B7%E4%B8%8E%E6%BF%80%E6%B4%BB%EF%BC%88suspend-active%EF%BC%89"><span class="toc-number">1.2.3.5.</span> <span class="toc-text">进程的挂起与激活（suspend active）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E5%90%8C%E6%AD%A5"><span class="toc-number">1.2.4.</span> <span class="toc-text">进程同步</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1"><span class="toc-number">1.2.5.</span> <span class="toc-text">进程通信</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.2.5.1.</span> <span class="toc-text">进程通信的类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92%E9%80%9A%E4%BF%A1%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F"><span class="toc-number">1.2.5.2.</span> <span class="toc-text">消息传递通信的实现方式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%EF%BC%88Thread%EF%BC%89"><span class="toc-number">1.2.6.</span> <span class="toc-text">线程（Thread）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%BC%95%E5%85%A5"><span class="toc-number">1.2.6.1.</span> <span class="toc-text">线程的引入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E4%B8%8E%E8%BF%9B%E7%A8%8B"><span class="toc-number">1.2.6.2.</span> <span class="toc-text">线程与进程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E7%8A%B6%E6%80%81%E5%92%8C%E7%BA%BF%E7%A8%8B%E6%8E%A7%E5%88%B6%E5%9D%97"><span class="toc-number">1.2.6.3.</span> <span class="toc-text">线程状态和线程控制块</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.2.7.</span> <span class="toc-text">线程的实现</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/11/10/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%AC1%E7%AB%A0/" title="操作系统第一章"><img src="https://imageurlbed.oss-cn-shenzhen.aliyuncs.com/img/mountains-7750722_1920.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="操作系统第一章"/></a><div class="content"><a class="title" href="/2023/11/10/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%AC1%E7%AB%A0/" title="操作系统第一章">操作系统第一章</a><time datetime="2023-11-10T06:07:21.000Z" title="发表于 2023-11-10 14:07:21">2023-11-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/11/10/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%AC4%E7%AB%A0/" title="操作系统第4章"><img src="https://imageurlbed.oss-cn-shenzhen.aliyuncs.com/img/mountains-7750722_1920.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="操作系统第4章"/></a><div class="content"><a class="title" href="/2023/11/10/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%AC4%E7%AB%A0/" title="操作系统第4章">操作系统第4章</a><time datetime="2023-11-10T06:07:21.000Z" title="发表于 2023-11-10 14:07:21">2023-11-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/11/10/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%AC2%E7%AB%A0/" title="操作系统第2章"><img src="https://imageurlbed.oss-cn-shenzhen.aliyuncs.com/img/mountains-7750722_1920.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="操作系统第2章"/></a><div class="content"><a class="title" href="/2023/11/10/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%AC2%E7%AB%A0/" title="操作系统第2章">操作系统第2章</a><time datetime="2023-11-10T06:07:21.000Z" title="发表于 2023-11-10 14:07:21">2023-11-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/11/10/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%AC3%E7%AB%A0/" title="操作系统第3章"><img src="https://imageurlbed.oss-cn-shenzhen.aliyuncs.com/img/mountains-7750722_1920.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="操作系统第3章"/></a><div class="content"><a class="title" href="/2023/11/10/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%AC3%E7%AB%A0/" title="操作系统第3章">操作系统第3章</a><time datetime="2023-11-10T06:07:21.000Z" title="发表于 2023-11-10 14:07:21">2023-11-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/11/10/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%AC7%E7%AB%A0/" title="操作系统第7章"><img src="https://imageurlbed.oss-cn-shenzhen.aliyuncs.com/img/mountains-7750722_1920.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="操作系统第7章"/></a><div class="content"><a class="title" href="/2023/11/10/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%AC7%E7%AB%A0/" title="操作系统第7章">操作系统第7章</a><time datetime="2023-11-10T06:07:21.000Z" title="发表于 2023-11-10 14:07:21">2023-11-10</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By Jerry Jiang</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, '']
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>